import"../chunks/CWj6FrbW.js";import{i as Le}from"../chunks/BLUEuTwA.js";import{ad as Me,K as we,ae as Fe,x as Se,p as Te,t as g,a as Pe,s as l,E as je,F as i,c as r,r as s,U as J,J as k,f as Ae}from"../chunks/B9NWKDUK.js";import{s as d}from"../chunks/BLtHPNs2.js";import{i as K}from"../chunks/DOAcvDwK.js";import{e as oe,i as ie,r as N,s as Ie,a as Ue}from"../chunks/FSSEZNyT.js";import{l as qe,t as h,e as O,a as b}from"../chunks/B3d5NtUf.js";import{s as V,a as Be,b as R}from"../chunks/B0kCNSg1.js";import{v as ve,s as de,b as ne,r as Ce,m as De,p as He}from"../chunks/Byps_cyz.js";function z(e,n,p=n){var L=Me();qe(e,"input",c=>{var u=c?e.defaultValue:e.value;if(u=G(e)?Q(u):u,p(u),L&&u!==(u=n())){var E=e.selectionStart,$=e.selectionEnd;e.value=u??"",$!==null&&(e.selectionStart=E,e.selectionEnd=Math.min($,e.value.length))}}),(Se&&e.defaultValue!==e.value||we(n)==null&&e.value)&&p(G(e)?Q(e.value):e.value),Fe(()=>{var c=n();G(e)&&c===Q(e.value)||e.type==="date"&&!c&&!e.value||c!==e.value&&(e.value=c??"")})}function G(e){var n=e.type;return n==="number"||n==="range"}function Q(e){return e===""?null:+e}var Je=h('<div class="progress svelte-1a3d6pp"><div class="progress-bar svelte-1a3d6pp"></div> <div class="progress-text svelte-1a3d6pp"> </div></div>'),Ke=h("<li> </li>"),Ne=h('<div class="errors svelte-1a3d6pp"><h3> </h3> <ul></ul></div>'),Oe=h("<div> </div> <!>",1),Re=h('<div class="chapter"><a> </a></div>'),ze=h(`<div class="main-container svelte-1a3d6pp"><div class="loading-container svelte-1a3d6pp"><div class="title svelte-1a3d6pp">Input</div> <div>These buttons do NOT upload anything to the internet!</div> <div>They only load the files into your browser's memory.</div> <div>Expected folder structure for the episode: <pre class="code svelte-1a3d6pp">script.json
img/
  ch-1/
    01.jpg
    ...
voice/
  ch-1/
    01.ogg
    ...</pre></div> <button class="load-button svelte-1a3d6pp"> </button> <div>Expected folder structure for the sound files: <pre class="code svelte-1a3d6pp">se/
  001.ogg
  ...
bgm/
  001.ogg
  ...</pre></div> <button class="load-button svelte-1a3d6pp"> </button> <div>Use this button before loading a new episode.</div> <button class="load-button svelte-1a3d6pp">Reset</button> <!> <!></div> <div class="vertical-divider svelte-1a3d6pp"></div> <div class="toc-container svelte-1a3d6pp"><div class="title svelte-1a3d6pp">Table of Contents</div> <!></div> <div class="vertical-divider svelte-1a3d6pp"></div> <div class="settings-container svelte-1a3d6pp"><div class="title svelte-1a3d6pp">Settings</div> <div class="settings-content svelte-1a3d6pp"><div class="settings-content-group svelte-1a3d6pp"><label for="voice-volume"> </label> <input type="range" id="voice-volume" min="0" max="100" class="svelte-1a3d6pp"></div> <div class="settings-content-group svelte-1a3d6pp"><label for="se-volume"> </label> <input type="range" id="se-volume" min="0" max="100" class="svelte-1a3d6pp"></div> <div class="settings-content-group svelte-1a3d6pp"><label for="bgm-volume"> </label> <input type="range" id="bgm-volume" min="0" max="100" class="svelte-1a3d6pp"></div></div></div></div>`);function sa(e,n){Te(n,!1);const[p,L]=Be(),c=()=>V(He,"$processFiles",p),u=()=>V(De,"$manga",p),E=()=>V(ve,"$voiceVolume",p),$=()=>V(de,"$seVolume",p),W=()=>V(ne,"$bgmVolume",p);let M=J(0),m=J(!1),_=J(null);function X(a){const t=document.createElement("input");t.type="file",t.setAttribute("webkitdirectory",""),t.setAttribute("directory",""),t.onchange=async o=>{if(o.target instanceof HTMLInputElement&&o.target.files&&o.target.files.length>0){k(m,!0);try{k(_,await a(o.target.files,v=>{k(M,v)}))}catch(v){console.error("Error processing folder:",v)}finally{k(m,!1)}}},t.click()}function ce(){X((a,t)=>c()(a,!1,t))}function ue(){X((a,t)=>c()(a,!0,t))}Le();var w=ze(),F=r(w),x=l(r(F),8),pe=r(x,!0);s(x);var y=l(x,4),me=r(y,!0);s(y);var S=l(y,4),Y=l(S,2);{var fe=a=>{var t=Je(),o=r(t),v=l(o,2),f=r(v);s(v),s(t),g(()=>{Ie(o,`width: ${i(M)??""}%`),d(f,`${i(M)??""}%`)}),b(a,t)};K(Y,a=>{i(m)&&a(fe)})}var _e=l(Y,2);{var ge=a=>{var t=Oe(),o=Ae(t),v=r(o);s(o);var f=l(o,2);{var q=B=>{var C=Ne(),D=r(C),ye=r(D);s(D);var le=l(D,2);oe(le,5,()=>i(_).errors,ie,(Ve,Ee)=>{var H=Ke(),ke=r(H,!0);s(H),g(()=>d(ke,i(Ee))),b(Ve,H)}),s(le),s(C),g(()=>d(ye,`Errors (${i(_).errors.length??""}):`)),b(B,C)};K(f,B=>{i(_).errors.length>0&&B(q)})}g(()=>d(v,`Processed ${i(_).processed??""} files`)),b(a,t)};K(_e,a=>{i(_)!==null&&a(ge)})}s(F);var T=l(F,4),be=l(r(T),2);oe(be,1,()=>{var a;return((a=u())==null?void 0:a.chapters)??[]},ie,(a,t,o)=>{var v=Re(),f=r(v);Ue(f,"href",`/chapter/${o}`);var q=r(f,!0);s(f),s(v),g(()=>d(q,i(t).title)),b(a,v)}),s(T);var Z=l(T,4),ee=l(r(Z),2),P=r(ee),j=r(P),he=r(j);s(j);var ae=l(j,2);N(ae),s(P);var A=l(P,2),I=r(A),$e=r(I);s(I);var te=l(I,2);N(te),s(A);var se=l(A,2),U=r(se),xe=r(U);s(U);var re=l(U,2);N(re),s(se),s(ee),s(Z),s(w),g((a,t,o)=>{x.disabled=i(m),d(pe,i(m)?"Processing...":"Load episode"),y.disabled=i(m),d(me,i(m)?"Processing...":"Load sound files"),S.disabled=i(m),d(he,`Voice Volume: ${a??""}`),d($e,`Sound Effect Volume: ${t??""}`),d(xe,`Background Music Volume: ${o??""}`)},[()=>Math.round(E()),()=>Math.round($()),()=>Math.round(W())],je),O("click",x,ce),O("click",y,ue),O("click",S,function(...a){var t;(t=Ce)==null||t.apply(this,a)}),z(ae,E,a=>R(ve,a)),z(te,$,a=>R(de,a)),z(re,W,a=>R(ne,a)),b(e,w),Pe(),L()}export{sa as component};
