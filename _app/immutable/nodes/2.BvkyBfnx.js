import{l as me,t as x,e as J,c as _}from"../chunks/CN1S20pl.js";import{i as Pe}from"../chunks/BrCeg3vt.js";import{ad as De,E as _e,ae as pe,p as ge,q as Ae,a9 as $,u as Be,ac as o,aa as r,ab as a,z as l,D as K,C as w,a8 as Ie}from"../chunks/BLiXIDi3.js";import{s as p}from"../chunks/CnnPq2V6.js";import{i as S,s as g,a as qe,b as h}from"../chunks/BF2NtrQn.js";import{e as ue,i as be,r as j,s as ze}from"../chunks/DljTyexv.js";import{s as Q,b as W,v as X,r as Ne,m as Oe,i as Re,a as Ue,p as Ge,d as fe}from"../chunks/CMHswb_d.js";function k(e,d,n=d){var f=De();me(e,"input",c=>{var u=c?e.defaultValue:e.value;if(u=Y(e)?Z(u):u,n(u),f&&u!==(u=d())){var M=e.selectionStart,V=e.selectionEnd;e.value=u??"",V!==null&&(e.selectionStart=M,e.selectionEnd=Math.min(V,e.value.length))}}),(ge&&e.defaultValue!==e.value||_e(d)==null&&e.value)&&n(Y(e)?Z(e.value):e.value),pe(()=>{var c=d();Y(e)&&c===Z(e.value)||e.type==="date"&&!c&&!e.value||c!==e.value&&(e.value=c??"")})}function Je(e,d,n=d){me(e,"change",f=>{var c=f?e.defaultChecked:e.checked;n(c)}),(ge&&e.defaultChecked!==e.checked||_e(d)==null)&&n(e.checked),pe(()=>{var f=d();e.checked=!!f})}function Y(e){var d=e.type;return d==="number"||d==="range"}function Z(e){return e===""?null:+e}var Ke=x('<div class="progress svelte-1fbo6bj"><div class="progress-bar svelte-1fbo6bj"></div> <div class="progress-text svelte-1fbo6bj"> </div></div>'),Qe=x("<li> </li>"),We=x('<div class="errors svelte-1fbo6bj"><h3> </h3> <ul></ul></div>'),Xe=x("<div> </div> <!>",1),Ye=x('<div class="chapter"><a> </a></div>'),Ze=x('<div class="settings-content-checkbox-group svelte-1fbo6bj"><label for="enable-header">Disable site header</label> <input type="checkbox" id="disable-header"></div>'),et=x(`<div class="main-container svelte-1fbo6bj"><div class="loading-container svelte-1fbo6bj"><div class="title svelte-1fbo6bj">Input</div> <div>These buttons do NOT upload anything to the internet!</div> <div>They only load the files into your browser's memory.</div> <div>Expected folder structure for the episode: <pre class="code svelte-1fbo6bj">script.json
img/
  ch-1/
    01.jpg
    ...
voice/
  ch-1/
    01.ogg
    ...</pre></div> <button class="load-button svelte-1fbo6bj"> </button> <div>Expected folder structure for the sound files: <pre class="code svelte-1fbo6bj">se/
  001.ogg
  ...
bgm/
  001.ogg
  ...</pre></div> <button class="load-button svelte-1fbo6bj"> </button> <div>Use this button before loading a new episode.</div> <button class="load-button svelte-1fbo6bj">Reset</button> <!> <!></div> <div class="section-divider svelte-1fbo6bj"></div> <div class="toc-container svelte-1fbo6bj"><div class="title svelte-1fbo6bj">Table of Contents</div> <!></div> <div class="section-divider svelte-1fbo6bj"></div> <div class="settings-container svelte-1fbo6bj"><div class="title svelte-1fbo6bj">Settings</div> <div class="settings-content svelte-1fbo6bj"><div class="settings-content-group svelte-1fbo6bj"><div>Voice Volume: <input type="number" id="voice-volume-text" class="volume-input svelte-1fbo6bj" min="0" max="100"></div> <input type="range" id="voice-volume" min="0" max="100" class="svelte-1fbo6bj"></div> <div class="settings-content-group svelte-1fbo6bj"><div>Sound Effect Volume: <input type="number" id="se-volume-text" class="volume-input svelte-1fbo6bj" min="0" max="100"></div> <input type="range" id="se-volume" min="0" max="100" class="svelte-1fbo6bj"></div> <div class="settings-content-group svelte-1fbo6bj"><div>Background Music Volume: <input type="number" id="bgm-volume-text" class="volume-input svelte-1fbo6bj" min="0" max="100"></div> <input type="range" id="bgm-volume" min="0" max="100" class="svelte-1fbo6bj"></div> <!></div></div></div>`);function vt(e,d){Ae(d,!1);const[n,f]=qe(),c=()=>g(Ge,"$processFiles",n),u=()=>g(Oe,"$manga",n),M=()=>g(X,"$voiceVolume",n),V=()=>g(Q,"$seVolume",n),ee=()=>g(W,"$bgmVolume",n),he=()=>g(Re,"$isMobile",n),je=()=>g(fe,"$disableHeader",n);let T=K(0),b=K(!1),y=K(null);function te(t){const s=document.createElement("input");s.type="file",s.setAttribute("webkitdirectory",""),s.setAttribute("directory",""),s.onchange=async i=>{if(i.target instanceof HTMLInputElement&&i.target.files&&i.target.files.length>0){w(b,!0);try{w(y,await t(i.target.files,v=>{w(T,v)}))}catch(v){console.error("Error processing folder:",v)}finally{w(b,!1)}}},s.click()}function xe(){te((t,s)=>c()(t,!1,s))}function ye(){te((t,s)=>c()(t,!0,s))}Pe();var C=et(),F=r(C),E=o(r(F),8),$e=r(E,!0);a(E);var L=o(E,4),ke=r(L,!0);a(L);var H=o(L,4),se=o(H,2);{var Ve=t=>{var s=Ke(),i=r(s),v=o(i,2),m=r(v);a(v),a(s),$(()=>{Ue(i,`width: ${l(T)??""}%`),p(m,`${l(T)??""}%`)}),_(t,s)};S(se,t=>{l(b)&&t(Ve)})}var Ee=o(se,2);{var Le=t=>{var s=Xe(),i=Ie(s),v=r(i);a(i);var m=o(i,2);{var N=O=>{var R=We(),U=r(R),Te=r(U);a(U);var ce=o(U,2);ue(ce,5,()=>l(y).errors,be,(Ce,Fe)=>{var G=Qe(),He=r(G,!0);a(G),$(()=>p(He,l(Fe))),_(Ce,G)}),a(ce),a(R),$(()=>p(Te,`Errors (${l(y).errors.length??""}):`)),_(O,R)};S(m,O=>{l(y).errors.length>0&&O(N)})}$(()=>p(v,`Processed ${l(y).processed??""} files`)),_(t,s)};S(Ee,t=>{l(y)!==null&&t(Le)})}a(F);var P=o(F,4),Me=o(r(P),2);ue(Me,1,()=>{var t;return((t=u())==null?void 0:t.chapters)??[]},be,(t,s,i)=>{var v=Ye(),m=r(v);ze(m,"href",`/reader?chapter=${i}`);var N=r(m,!0);a(m),a(v),$(()=>p(N,l(s).title)),_(t,v)}),a(P);var ae=o(P,4),oe=o(r(ae),2),D=r(oe),A=r(D),re=o(r(A));j(re),a(A);var ie=o(A,2);j(ie),a(D);var B=o(D,2),I=r(B),le=o(r(I));j(le),a(I);var ve=o(I,2);j(ve),a(B);var q=o(B,2),z=r(q),de=o(r(z));j(de),a(z);var ne=o(z,2);j(ne),a(q);var we=o(q,2);{var Se=t=>{var s=Ze(),i=o(r(s),2);j(i),a(s),Je(i,je,v=>h(fe,v)),_(t,s)};S(we,t=>{he()||t(Se)})}a(oe),a(ae),a(C),$(()=>{E.disabled=l(b),p($e,l(b)?"Processing...":"Load episode"),L.disabled=l(b),p(ke,l(b)?"Processing...":"Load sound files"),H.disabled=l(b)}),J("click",E,xe),J("click",L,ye),J("click",H,function(...t){var s;(s=Ne)==null||s.apply(this,t)}),k(re,M,t=>h(X,t)),k(ie,M,t=>h(X,t)),k(le,V,t=>h(Q,t)),k(ve,V,t=>h(Q,t)),k(de,ee,t=>h(W,t)),k(ne,ee,t=>h(W,t)),_(e,C),Be(),f()}export{vt as component};
