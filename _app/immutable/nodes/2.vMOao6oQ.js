import"../chunks/CWj6FrbW.js";import"../chunks/C9bT8FLL.js";import{p as Q,t as c,a as U,c as a,s as l,r as t,i as o,x as w,l as m}from"../chunks/ZCrrH9wl.js";import{e as V,s as d}from"../chunks/DKt29UY_.js";import{i as F,s as W,a as X}from"../chunks/CVUsDN2D.js";import{e as S,i as T,m as Y,p as Z,s as ee,a as re}from"../chunks/BxEAK-5_.js";import{t as f,a as p}from"../chunks/CQjnH1Cc.js";import{i as te}from"../chunks/CoaNk3M5.js";var ae=f('<div class="progress svelte-okyf78"><div class="progress-bar svelte-okyf78"></div> <div class="progress-text svelte-okyf78"> </div></div>'),se=f("<li> </li>"),oe=f('<div class="errors svelte-okyf78"><h3> </h3> <ul></ul></div>'),ie=f('<div class="result svelte-okyf78"><p> </p> <!></div>'),le=f('<div class="chapter"><a> </a></div>'),ve=f('<div class="main-container svelte-okyf78"><div class="loading-container svelte-okyf78"><h1>Manga Reader</h1> <button class="svelte-okyf78"> </button> <!> <!></div> <div class="toc-container svelte-okyf78"><h1>Table of Contents</h1> <!></div></div>');function ge(C,H){Q(H,!1);const[I,L]=W(),R=()=>X(Y,"$manga",I);let g=w(0),_=w(!1),n=w(null);function j(){const e=document.createElement("input");e.type="file",e.setAttribute("webkitdirectory",""),e.setAttribute("directory",""),e.onchange=async r=>{if(r.target instanceof HTMLInputElement&&r.target.files&&r.target.files.length>0){m(_,!0);try{m(n,await Z(r.target.files,s=>{m(g,s)}))}catch(s){console.error("Error processing folder:",s)}finally{m(_,!1)}}},e.click()}te();var h=ve(),y=a(h),u=l(a(y),2),q=a(u,!0);t(u);var P=l(u,2);{var z=e=>{var r=ae(),s=a(r),i=l(s,2),v=a(i);t(i),t(r),c(()=>{ee(s,`width: ${o(g)??""}%`),d(v,`${o(g)??""}%`)}),p(e,r)};F(P,e=>{o(_)&&e(z)})}var B=l(P,2);{var D=e=>{var r=ie(),s=a(r),i=a(s);t(s);var v=l(s,2);{var b=k=>{var x=oe(),$=a(x),J=a($);t($);var M=l($,2);S(M,5,()=>o(n).errors,T,(K,N)=>{var E=se(),O=a(E,!0);t(E),c(()=>d(O,o(N))),p(K,E)}),t(M),t(x),c(()=>d(J,`Errors (${o(n).errors.length??""}):`)),p(k,x)};F(v,k=>{o(n).errors.length>0&&k(b)})}t(r),c(()=>d(i,`Processed ${o(n).processed??""} files`)),p(e,r)};F(B,e=>{o(n)!==null&&e(D)})}t(y);var A=l(y,2),G=l(a(A),2);S(G,1,()=>{var e;return((e=R())==null?void 0:e.chapters)??[]},T,(e,r,s)=>{var i=le(),v=a(i);re(v,"href",`/chapter/${s}`);var b=a(v,!0);t(v),t(i),c(()=>d(b,o(r).title)),p(e,i)}),t(A),t(h),c(()=>{u.disabled=o(_),d(q,o(_)?"Processing...":"Select Folder")}),V("click",u,j),p(C,h),U(),L()}export{ge as component};
