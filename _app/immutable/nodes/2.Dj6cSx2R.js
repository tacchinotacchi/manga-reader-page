import{l as Le,t as h,e as H,c as g}from"../chunks/Cc8CCPXp.js";import{i as Me}from"../chunks/ChyuBLAQ.js";import{ad as we,E as Se,ae as Te,p as Fe,q as Pe,a9 as b,u as Ae,ac as l,z as je,A as i,aa as r,ab as s,N as O,D as k,a8 as qe}from"../chunks/DXORa8Mb.js";import{s as d}from"../chunks/CAnrLxbL.js";import{i as R}from"../chunks/Bxv1uYZc.js";import{e as oe,i as ie,r as U,s as De,a as Ie}from"../chunks/CYoyBcLu.js";import{s as V,a as Ne,b as G}from"../chunks/C3NEGiT9.js";import{v as ve,s as de,b as ne,r as ze,m as Be,p as Ce}from"../chunks/B524W00X.js";function J(e,n,p=n){var L=we();Le(e,"input",c=>{var u=c?e.defaultValue:e.value;if(u=K(e)?Q(u):u,p(u),L&&u!==(u=n())){var E=e.selectionStart,$=e.selectionEnd;e.value=u??"",$!==null&&(e.selectionStart=E,e.selectionEnd=Math.min($,e.value.length))}}),(Fe&&e.defaultValue!==e.value||Se(n)==null&&e.value)&&p(K(e)?Q(e.value):e.value),Te(()=>{var c=n();K(e)&&c===Q(e.value)||e.type==="date"&&!c&&!e.value||c!==e.value&&(e.value=c??"")})}function K(e){var n=e.type;return n==="number"||n==="range"}function Q(e){return e===""?null:+e}var He=h('<div class="progress svelte-1a3d6pp"><div class="progress-bar svelte-1a3d6pp"></div> <div class="progress-text svelte-1a3d6pp"> </div></div>'),Oe=h("<li> </li>"),Re=h('<div class="errors svelte-1a3d6pp"><h3> </h3> <ul></ul></div>'),Ue=h("<div> </div> <!>",1),Ge=h('<div class="chapter"><a> </a></div>'),Je=h(`<div class="main-container svelte-1a3d6pp"><div class="loading-container svelte-1a3d6pp"><div class="title svelte-1a3d6pp">Input</div> <div>These buttons do NOT upload anything to the internet!</div> <div>They only load the files into your browser's memory.</div> <div>Expected folder structure for the episode: <pre class="code svelte-1a3d6pp">script.json
img/
  ch-1/
    01.jpg
    ...
voice/
  ch-1/
    01.ogg
    ...</pre></div> <button class="load-button svelte-1a3d6pp"> </button> <div>Expected folder structure for the sound files: <pre class="code svelte-1a3d6pp">se/
  001.ogg
  ...
bgm/
  001.ogg
  ...</pre></div> <button class="load-button svelte-1a3d6pp"> </button> <div>Use this button before loading a new episode.</div> <button class="load-button svelte-1a3d6pp">Reset</button> <!> <!></div> <div class="vertical-divider svelte-1a3d6pp"></div> <div class="toc-container svelte-1a3d6pp"><div class="title svelte-1a3d6pp">Table of Contents</div> <!></div> <div class="vertical-divider svelte-1a3d6pp"></div> <div class="settings-container svelte-1a3d6pp"><div class="title svelte-1a3d6pp">Settings</div> <div class="settings-content svelte-1a3d6pp"><div class="settings-content-group svelte-1a3d6pp"><label for="voice-volume"> </label> <input type="range" id="voice-volume" min="0" max="100" class="svelte-1a3d6pp"></div> <div class="settings-content-group svelte-1a3d6pp"><label for="se-volume"> </label> <input type="range" id="se-volume" min="0" max="100" class="svelte-1a3d6pp"></div> <div class="settings-content-group svelte-1a3d6pp"><label for="bgm-volume"> </label> <input type="range" id="bgm-volume" min="0" max="100" class="svelte-1a3d6pp"></div></div></div></div>`);function ta(e,n){Pe(n,!1);const[p,L]=Ne(),c=()=>V(Ce,"$processFiles",p),u=()=>V(Be,"$manga",p),E=()=>V(ve,"$voiceVolume",p),$=()=>V(de,"$seVolume",p),W=()=>V(ne,"$bgmVolume",p);let M=O(0),m=O(!1),_=O(null);function X(a){const t=document.createElement("input");t.type="file",t.setAttribute("webkitdirectory",""),t.setAttribute("directory",""),t.onchange=async o=>{if(o.target instanceof HTMLInputElement&&o.target.files&&o.target.files.length>0){k(m,!0);try{k(_,await a(o.target.files,v=>{k(M,v)}))}catch(v){console.error("Error processing folder:",v)}finally{k(m,!1)}}},t.click()}function ce(){X((a,t)=>c()(a,!1,t))}function ue(){X((a,t)=>c()(a,!0,t))}Me();var w=Je(),S=r(w),y=l(r(S),8),pe=r(y,!0);s(y);var x=l(y,4),me=r(x,!0);s(x);var T=l(x,4),Y=l(T,2);{var fe=a=>{var t=He(),o=r(t),v=l(o,2),f=r(v);s(v),s(t),b(()=>{De(o,`width: ${i(M)??""}%`),d(f,`${i(M)??""}%`)}),g(a,t)};R(Y,a=>{i(m)&&a(fe)})}var _e=l(Y,2);{var ge=a=>{var t=Ue(),o=qe(t),v=r(o);s(o);var f=l(o,2);{var I=N=>{var z=Re(),B=r(z),xe=r(B);s(B);var le=l(B,2);oe(le,5,()=>i(_).errors,ie,(Ve,Ee)=>{var C=Oe(),ke=r(C,!0);s(C),b(()=>d(ke,i(Ee))),g(Ve,C)}),s(le),s(z),b(()=>d(xe,`Errors (${i(_).errors.length??""}):`)),g(N,z)};R(f,N=>{i(_).errors.length>0&&N(I)})}b(()=>d(v,`Processed ${i(_).processed??""} files`)),g(a,t)};R(_e,a=>{i(_)!==null&&a(ge)})}s(S);var F=l(S,4),be=l(r(F),2);oe(be,1,()=>{var a;return((a=u())==null?void 0:a.chapters)??[]},ie,(a,t,o)=>{var v=Ge(),f=r(v);Ie(f,"href",`/reader?chapter=${o}`);var I=r(f,!0);s(f),s(v),b(()=>d(I,i(t).title)),g(a,v)}),s(F);var Z=l(F,4),ee=l(r(Z),2),P=r(ee),A=r(P),he=r(A);s(A);var ae=l(A,2);U(ae),s(P);var j=l(P,2),q=r(j),$e=r(q);s(q);var te=l(q,2);U(te),s(j);var se=l(j,2),D=r(se),ye=r(D);s(D);var re=l(D,2);U(re),s(se),s(ee),s(Z),s(w),b((a,t,o)=>{y.disabled=i(m),d(pe,i(m)?"Processing...":"Load episode"),x.disabled=i(m),d(me,i(m)?"Processing...":"Load sound files"),T.disabled=i(m),d(he,`Voice Volume: ${a??""}`),d($e,`Sound Effect Volume: ${t??""}`),d(ye,`Background Music Volume: ${o??""}`)},[()=>Math.round(E()),()=>Math.round($()),()=>Math.round(W())],je),H("click",y,ce),H("click",x,ue),H("click",T,function(...a){var t;(t=ze)==null||t.apply(this,a)}),J(ae,E,a=>G(ve,a)),J(te,$,a=>G(de,a)),J(re,W,a=>G(ne,a)),g(e,w),Ae(),L()}export{ta as component};
